---
options :
  # should getters / setters be prefixed with get / set?
  getSyntax: False
  # should POD members be exposed with getters/setters in classes that have them as members?
  exposePODMembers: True
  includeSubfolder: True

components :

  eic::VectorPxPyPzM:
    Members :
      - double px
      - double py
      - double pz
      - double m

  eic::VectorXYZT:
    Members :
      - double x
      - double y
      - double z
      - double t

  eic::VectorXYZ :
    Members :
      - double x  // x
      - double y  // y
      - double z  // z

  eic::VectorPolar:
    Members:
      - double r
      - double theta
      - double phi

  eic::VectorXYZLocal :
    Members :
      - double local_x
      - double local_y
      - double local_z

  eic::DimensionXYZ :
    Members :
      - double dim_x
      - double dim_y
      - double dim_z

  eic::CovSymmetricXYZ :
    Members :
      - double covsym_xx
      - double covsym_yy
      - double covsym_zz

  eic::CovXYZ :
    Members :
      - double cov_xx
      - double cov_yy
      - double cov_zz
      - double cov_xy
      - double cov_xz
      - double cov_yz

  eic::PixelXY :
    Members :
      - double pixel_x
      - double pixel_y

  eic::CellXYZ :
    Members :
      - double cell_x
      - double cell_y
      - double cell_z

  eic::ElectronBeam :
    Members :
      - float eEnergy
      - int   helicity 

  eic::HadronBeam :
    Members :
      - float hEnergy
      - int   pol 


datatypes :

  eic::EventInfo:
    Description : "Event Info"
    Author : "W.Armstrong"
    Members :
      - long long run      // Run number.
      - long long number   // Event number.
      - long long genID    // Generator ID (TBD).
      - long long procID   // Processes ID (TBD).
      - long long type     // event type ID (TBD).

  eic::Particle :
    Description : "Basic Particle used for reconstructed and generated particles"
    Author : "W.Armstrong"
    Members :
      - eic::VectorPxPyPzM p       // Four momentum.
      - eic::VectorXYZT    v       // vertex.
      - long long          pid     // Particle type identification code
      - long long          status  // Status code

  eic::RawCalorimeterHit:
    Description: "Raw (digitized) calorimeter hit"
    Author : "W.Armstrong"
    Members:
      - long long cellID    // The detector specific (geometrical) cell id.
      - long long amplitude // The amplitude of the hit in ADC counts.
      - long long timeStamp // The time stamp for the hit.

  eic::CalorimeterHit:
    Description: "Calorimeter hit"
    Author : "W.Armstrong"
    Members:
      - long long           cellID    // The detector specific (geometrical) cell id.
      - float               energy    // The energy of the hit in [GeV].
      - float               time      // The time of the hit in [ns].
      - eic::VectorXYZ      position  // The global position of the hit in world coordinates.
      - eic::VectorXYZLocal local     // The local position of the hit in detector coordinates.
      - eic::DimensionXYZ   dimension // The dimension information of the cell
      - int                 type      // The type of the hit.
    OneToOneRelations:
      - eic::RawCalorimeterHit rawHit // The RawCalorimeterHit

  eic::RawTrackerHit:
    Description : "Raw (digitized) tracker hit"
    Author : "W.Armstrong"
    Members:
      - long long cellID // The detector specific (geometrical) cell id.
      - int time         // tdc value.
      - int charge       // adc value

  eic::TrackerHit:
    Description : "Tracker hit (reconstructed from Raw)"
    Author : "W.Armstrong"
    Members :
      - long long            cellID    // The detector specific (geometrical) cell id.
      - float                time      // The time of the hit.
      - float                EDep      // EDep
      - float                EDepError // error on EDep
      - eic::VectorXYZ       position  // position
      - eic::CovSymmetricXYZ covMatrix // covMatrix

  eic::Cluster:
    Description: "EIC cluster"
    Author : "W.Armstrong, C.Peng"
    Members:
      - float                energy          // Energy of the cluster
      - eic::VectorXYZ       position        // Global position of the cluster.
      - eic::CovXYZ          positionError   // Covariance matrix of the position (6 Parameters)
      - float                theta           // Intrinsic direction of cluster at position - Theta.
      - float                phi             // Intrinsic direction of cluster at position - Phi.
        #- std::array<float, 3> directionError  // Covariance matrix of the direction (3 Parameters)
        #- std::vector<float> shape  // Shape parameters
        #- std::vector<float> weight // weight of a particular cluster
        #- std::vector<float> subdetectorEnergies // A vector that holds the energy observed in a particular subdetector.
    OneToManyRelations:
      - eic::Cluster        clusters // The clusters that have been combined to this cluster.
      - eic::CalorimeterHit hits     // The hits that have been combined to this cluster.


  eic::MCParticle:
    Description: "EIC MC Particle"
    Author : "F.Gaede, B. Hegner"
    Members:
      - long long pdg // The PDG code of the particle.
      - long long genstatus   // The status for particles as defined by the generator.
      - std::array<double, 3> vertex // The production vertex of the particle in [mm].
      - float charge // The particle's charge.
      - float mass // The mass of the particle in [GeV]
      - float time // The creation time of the particle in [ns] wrt. the event, e.g. for preassigned decays or decays in flight from the simulator.
      - std::array<double, 3> endpoint // The endpoint of the particle in [mm]
      - bool endpointSet  // Whether the endpoint has been set
      - std::array<double, 3> momentum // The particle's 3-momentum at the production vertex in [GeV]
    OneToManyRelations:
      - eic::MCParticle parents // The parents of this particle.
      - eic::MCParticle daughters // The daughters this particle.
    ExtraCode :
      declaration: "
      double Px() const {return momentum().at(0);}\n
      double Py() const {return momentum().at(1);}\n
      double Pz() const {return momentum().at(2);}\n
      double Px2() const {return momentum().at(0)*momentum().at(0);}\n
      double Py2() const {return momentum().at(1)*momentum().at(1);}\n
      double Pz2() const {return momentum().at(2)*momentum().at(2);}\n
      //ROOT::Math::XYZTVector FourVector() const { return  ROOT::Math::XYZTVector(Px(),Py(),Pz(),std::sqrt(Px2()+Py2()+Pz2()+mass()*mass())); }\n
      //double theta() const { return  ROOT::Math::XYZVector(Px(),Py(),Pz()).Theta();}\n
      "

  eic::ReconstructedParticle:
    Description: "EIC Reconstructed Particle"
    Author : "W.Armstrong"
    Members:
      - long long      pid            // PID of reconstructed particle.
      - double         energy         // Energy of the reconstructed particle.
      - eic::VectorXYZ p              // three momentum.
      - double         charge         // The particle's charge
      - double         mass           // The mass of the particle in [GeV]
    OneToOneRelations:
      - eic::Vertex vertex            // The start vertex associated to this particle.
    OneToManyRelations:
      - eic::Cluster clusters                // The clusters combined to this particle.
      - eic::Track tracks                    // The tracks combined to this particle"
      - eic::ReconstructedParticle particles // The particles combined to this particle

  eic::TrackParameters:
    Description: "ACTS Track parameters"
    Author : "W.Armstrong"
    Members:
      - double loc0        // loc0      
      - double loc1        // loc1      
      - double phi         // phi       
      - double theta       // theta     
      - double qOverP      // qOverP    
      - double time        // time      
      - double err_loc0    // err_loc0  
      - double err_loc1    // err_loc1  
      - double err_phi     // err_phi   
      - double err_theta   // err_theta 
      - double err_qOverP  // err_qOverP
      - double err_time    // err_time  

  eic::Track:
    Description: "EIC reconstructed track"
    Author : "F.Gaede, B. Hegner"
    Members:
      - float chi2 // Chi2
      - int ndf    // Number of degrees of freedom of the track fit.
      - float dEdx // dEdx of the track.
      - float dEdxError // Error of dEdx.
      - float radiusOfInnermostHit // The radius of the innermost hit that has been used in the track fit.
      #- std::vector<int> subdetectorHitNumbers // The number of hits in particular subdetectors
    OneToManyRelations:
      - eic::Track tracks    // The tracks that have been combined to this track.
      - eic::TrackerHit hits // The hits that have been combined to this track.
      - eic::TrackState trackStates // Track states associated to this track.

  eic::TrackerData:
    Description : "EIC tracker data"
    Author : "F.Gaede, B. Hegner"
    Members:
      - long long cellID // The detector specific (geometrical) cell id.
      - int time    // The time of the hit.
      - int charge  // adc value
        #- std::vector<float> charge // The corrected (calibrated) FADC spectrum.

  eic::TrackerPulse:
    Description : "EIC tracker pulse"
    Author : "F. Gaede, B. Hegner"
    Members:
      - long long cellID  // The detector specific (geometrical) cell id.
      - int quality  // ...
      - float time   // The time of the pulse.
      - float charge // The integrated charge of the pulse
        #      - std::vector<float> covMatrix    // ...
    OneToOneRelations:
      - eic::TrackerData corrData // ...

  eic::TrackerRawData:
    Description: "EIC tracker raw data"
    Author : "W.Armstrong"
    Members:
      - long long cellID     // The detector specific (geometrical) cell id.
      - long long channelID  // channel id.
      - int time             // time measurement associated with the adc values.
      - int adc              // measured ADC values
  
  eic::TrackerData:
    Description: "EIC tracker data"
    Author : "F.Gaede, B. Hegner"
    Members:
      - long long cellID  // The detector specific (geometrical) cell id.
      - int time     //  time measurement associated with the adc values.
        #      - std::vector<short> charge // The actual FADC spectrum.

  # EIC TrackState
  eic::TrackState:
      Description: "EIC track state"
      Author : "F.Gaede, B. Hegner"
      Members:
        - int location // The location of the track state.
        - float d0     // Impact parameter of the track in (r-phi).
        - float phi    // Phi of the track at the reference point.
        - float omega  // Omega is the signed curvature of the track in [1/mm].
        - float z0     // Impact parameter of the track in (r-z).
        - float tanLambda // Lambda is the dip angle of the track in r-z at the reference point.
        - std::array<float, 3> referencePoint // Reference point of the track parameters
          #        - std::vector<float> covMatrix // Covariance matrix of the track parameters.

  eic::Vertex:
      Description: "EIC vertex"
      Author : "W.Armstrong"
      Members:
        - int             primary     // Whether it is the primary vertex of the event
        - float           chi2        // Chi squared of the vertex fit.
        - float           probability // Probability of the vertex fit
        - eic::VectorXYZT position    // postion and time of vertex.
      OneToOneRelations:
        - eic::ReconstructedParticle particle // Reconstructed Particle associated to the Vertex.

  eic::RawPMTHit:
    Description: "EIC Raw PMT hit"
    Author: "C. Peng"
    Members:
      - long long cellID     // The detector specific (geometrical) cell id.
      - unsigned  amplitude  // PMT signal amplitude
      - unsigned  timeStamp  // PMT signal time

  eic::PMTHit:
    Description: "EIC PMT hit"
    Author: "C. Peng"
    Members:
      - long long cellID          // The detector specific (geometrical) cell id.
      - float npe                 // estimated number of photo-electrons
      - float time                // time
      - eic::VectorXYZ position   // PMT hit position
      - eic::VectorXYZLocal local // The local position of the hit in detector coordinates.

  eic::RIChCluster:
    Description: "EIC RICh Cluster"
    Author: "C. Peng"
    Members:
      - eic::VectorXYZ position // Global position of the cluster.
      - float theta             // opening angle of the ring
      - float radius            // radius of the best fit ring
      - float radiusError       // estimated error from the fit
      - float npe               // number of photo-electrons
    OneToManyRelations:
      - eic::PMTHit hits        // The hits that have been included in this cluster

  eic::ImagingLayer:
    Description: "Layer for Imaging Calorimeter"
    Author: "C. Peng"
    Members:
      - int                  nhits           // Number of hits
      - float                edep            // Energy deposit
      - float                radius          // Shower radius
      - float                skewness        // Skewness of hits distribution
      - float                chi2            // Edep chi2
      - float                x0cum           // estimated radiation length before this layer
      - eic::VectorXYZ       position        // Global center position.
      - eic::VectorPolar     polar           // Global center position in polar coordinates
    OneToManyRelations:
      - eic::CalorimeterHit hits             // Hits belong to this layer

  eic::ImagingCluster:
    Description: "Cluster for Imaging Calorimeter"
    Author: "C. Peng"
    Members:
      - int                  nhits           // Number of hits in this cluster.
      - float                energy          // Energy of the cluster.
      - float                edep            // Energy deposit of the cluster.
      - float                leakcorr        // Leakage correction to the cluster
      - eic::VectorXYZ       position        // Global position of the cluster.
      - eic::VectorPolar     polar           // Polar coordinates for global position.
      - float                cl_theta        // Intrinsic direction of cluster at position - Theta.
      - float                cl_phi          // Intrinsic direction of cluster at position - Phi.
      - std::array<eic::ImagingLayer, 20> layers  // layer data

